function insertParam(o,e){o=encodeURI(o),e=encodeURI(e);for(var t,_=document.location.search.substr(1).split("&"),s=_.length;s--;)if((t=_[s].split("="))[0]==o){t[1]=e,_[s]=t.join("=");break}s<0&&(_[_.length]=[o,e].join("=")),document.location.search=_.join("&")}function wc_os_trigger_permission_for_spit(o,e){var t=o('input[name="wc_os_customer_permitted"][value="yes"]').prop("checked")?"on":"off";"on"==t?o(".wc_os_review_order").length>0?o(".wc_os_review_order").show():"on"==wos_obj.wc_os_packages_overview&&(o.blockUI({message:""}),setTimeout((function(){document.location.reload()}),1e3)):o(".wc_os_review_order").hide();var _="on"==t?wos_obj.total_shipping_cost:0,s={action:"wc_os_customer_permitted_method",wc_os_customer_permitted_nonce:wos_obj.wc_os_customer_permitted_nonce,wc_os_customer_permitted:t,total_shipping_cost:_};if(o(this).prop("disabled",!0),o.blockUI({message:""}),o.active>0)return!1;if(o.post(wos_obj.ajax_url,s,(function(_){o.unblockUI(),o(this).prop("disabled",!1);var s=o.parseJSON(_);o("tr.fee td").length>0&&o("tr.fee").eq(0).find("td").html(s.fee),o("tr.order-total td").length>0&&""!=o.trim(s.total)&&o("tr.order-total td").html(s.total),e||(o(".woocommerce-checkout-review-order-table .woocommerce-shipping-totals").length>0||o(".woocommerce-checkout-review-order-table tr.fee").length>0)&&1==wos_obj.wc_os_shipping_methods&&("on"==t?o("tr.fee").show():o("tr.fee").hide(),document.location.reload())})),"on"==t){if(o(".wc_os_review_order").length>0&&o(".woocommerce-checkout-review-order-table").find("thead, tbody").hide(),""!=wos_obj.chosen_shipping_method&&o('input[value="'+wos_obj.chosen_shipping_method+'"]').parent().find("label").length>0)o.trim(o(".wc_os_update_shipping_cost").html())}else o(".woocommerce-checkout-review-order-table").find("thead, tbody").show()}jQuery(document).ready((function(o){if(setTimeout((function(){1==wos_obj.is_thank_you&&o(".woocommerce-order-details").length>0&&0==wos_obj.posted&&(o(".woocommerce-order-details").length>0&&o(".woocommerce-order-details").eq(0).insertAfter(o(".woocommerce-order-details").eq(1)),window.location.search.indexOf("refreshed")>-1||"true"==wos_obj.orders_page_refresh&&insertParam("refreshed","true"))}),500),o("body").on("click",'input[name="wc_os_customer_permitted"]',(function(){wc_os_trigger_permission_for_spit(o,!1)})),1==wos_obj.is_checkout||1==wos_obj.is_cart){setTimeout((function(){o('input[name="wc_os_customer_permitted"]').length>0&&"on"==wos_obj.wc_os_customer_permitted&&wc_os_trigger_permission_for_spit(o,!0)}),1e3);setInterval((function(){o(".wc_os_customer_permission").length>1&&(o(".wc_os_customer_permission").eq(0).remove(),wc_os_trigger_permission_for_spit(o,!0)),o("tr.fee").eq(1).length>0&&o("tr.fee").eq(1).remove()}),500),setInterval((function(){o(".wc_os_review_order").length>1&&o(".wc_os_review_order").eq(0).remove()}),500);o("form.checkout").on("change",'input[name^="payment_method"]',(function(){o("body").trigger("update_checkout")}))}if(o(".wos_notice_div.wos_product").length>1&&o(".wos_notice_div.wos_product").eq(0).remove(),o(".wos_notice_div.wos_product").length>0&&o(".wos_notice_div.wos_product").eq(0).show(),wos_obj.total_cart_items>0&&wos_obj.wc_os_actual_shipping_cost>0&&(1==wos_obj.is_checkout||1==wos_obj.is_cart)&&0==wos_obj.is_thank_you)var e=setInterval((function(){var t={action:"wc_os_update_parcel_shipping_cost",wc_os_nonce:wos_obj.wc_os_customer_permitted_nonce,wc_os_total_shipping_cost:wos_obj.total_shipping_cost,wc_os_actual_shipping_cost:wos_obj.wc_os_actual_shipping_cost,wc_os_parcels_count:wos_obj.wc_os_parcels_count};if(o(this).prop("disabled",!0),o.active>0)return clearInterval(e),!1;o.post(wos_obj.ajax_url,t,(function(o){wos_obj.wc_os_parcels_count>1&&("equal_plus"==wos_obj.shipping_selection?(wos_obj.wc_os_actual_shipping_cost,wos_obj.wc_os_parcels_count):wos_obj.wc_os_actual_shipping_cost);1==wos_obj.wc_os_parcels_count&&wos_obj.total_shipping_cost>0||o.parcels_count!=wos_obj.wc_os_parcels_count||wos_obj.total_shipping_cost}))}),2e3)}));